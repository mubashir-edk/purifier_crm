{% extends "home.html" %}

{% block content %}

    <form method="post">
    {% csrf_token %}

    {% comment %} {{form.as_p}} {% endcomment %}

        <div class="p-3 pb-4 password-new-content">
            <span class="new-password-text d-flex justify-content-center">Reset Password</span>

            <div class="d-md-flex mt-md-4 justify-md-content-between">
                <div class="mt-4 mt-md-0 me-md-1 reg-password-container">
                    <label for="id_new_password1" class="form-label">Enter new password</label>
                    <input type="password" name="new_password1" class="form-control" id="id_new_password1" placeholder="New password">
                    <i class="bi bi-eye-fill toggle-newpassword-icon1"></i>
                </div>
                <div class="mt-4 mt-md-0 ms-md-1 reg-password-container">
                    <label for="id_new_password2" class="form-label">Re-enter new password</label>
                    <input type="password" name="new_password2" class="form-control" id="id_new_password2" placeholder="Re-enter password">
                    <i class="bi bi-eye-fill toggle-newpassword-icon2"></i>
                </div>
            </div>

            <div class="mt-3">
                <ul class="">
                    <li class="text-muted">Password shoud not be similar to username</li>
                    <small class="form-text text-muted">Password must contain:</small>
                    <li class="text-muted">At least 8 characters</li>
                    <li class="text-muted">At least one uppercase letter (A-Z)</li>
                    <li class="text-muted">At least one lowercase letter (a-z)</li>
                    <li class="text-muted">At least one number (0-9)</li>
                    <li class="text-muted">At least one special character (e.g., !@#$%*)</li>
                </ul>
            </div>

            <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary w-100 mt-3">Confirm Reset</button>
            </div>
            <div class="d-flex justify-content-center mt-3 text-center">
                <span><a href="/auth/login/">Back to Login</a></span>
            </div>
        </div>

    </form>

    <script>

        function togglePasswordVisibility(toggleElement, passwordInput) {
            let holdTimer;
        
            toggleElement.addEventListener('mousedown', function () {
                holdTimer = setTimeout(function () {
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                }, 100); // Shorter delay for faster response
            });
        
            toggleElement.addEventListener('mouseup', function () {
                clearTimeout(holdTimer);
                passwordInput.setAttribute('type', 'password');
            });
        }
        
        const togglePasswordOne = document.querySelector('.toggle-newpassword-icon1');
        const togglePasswordTwo = document.querySelector('.toggle-newpassword-icon2');
        const passwordInputOne = document.querySelector('#id_new_password1');
        const passwordInputTwo = document.querySelector('#id_new_password2');
        
        togglePasswordVisibility(togglePasswordOne, passwordInputOne);
        togglePasswordVisibility(togglePasswordTwo, passwordInputTwo);
        

    </script>

{% endblock content %}

